<!DOCTYPE html>
<html>
<head>
  <title>Employee Portal</title>
  <script src="https://alcdn.msauth.net/browser/2.28.0/js/msal-browser.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding-top: 50px;
    }
    h3 {
      color: #0078d4;
    }
  </style>
</head>
<body>

<h3 id="msg">Loading...</h3>

<script>
const msalConfig = {
  auth: {
    clientId: "fa67e404-bf6c-4fa7-86f4-d8ac6a892479", // Your App Registration Client ID
    authority: "https://login.microsoftonline.com/eb76ed21-bfa4-460a-bbd7-9683fd9c5af3", // Tenant ID
    redirectUri: "https://lakkireddysujitha.github.io/Microsoft-EntraID-Complete-Guide/" // Your GitHub Pages URL
  }
};

// Create MSAL instance
const msalInstance = new msal.PublicClientApplication(msalConfig);

(async () => {
  try {
    // Handle redirect response
    const response = await msalInstance.handleRedirectPromise();
    const account = response?.account || msalInstance.getAllAccounts()[0];

    if (!account) {
      // User not logged in â†’ redirect to Microsoft login
      msalInstance.loginRedirect({
        scopes: ["openid", "profile", "email"]
      });
      return;
    }

    // Optional: Only allow certain users
    const allowedUsers = ["IT@sujithalakkireddy1gmail.onmicrosoft.com"]; // Add allowed emails
    if (!allowedUsers.includes(account.username)) {
      document.getElementById("msg").innerText = "Access Denied!";
      return;
    }

    // User is authenticated and allowed
    document.getElementById("msg").innerText =
      `Welcome to Employee Portal, ${account.username}`;

  } catch (error) {
    console.error(error);
    document.getElementById("msg").innerText = "Login failed!";
  }
})();
</script>

</body>
</html>


















